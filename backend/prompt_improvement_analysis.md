# Prompt 改进分析报告

## 问题分析

### 观察到的问题
比较 Article 1933 (Gemini 2.5 Pro) 和 Article 1934 (Claude Sonnet 4.5) 的输出，发现在 **Segmented Outline** 部分存在显著差异：

- **Article 1934 (Claude Sonnet 4.5)**：包含丰富的具体案例
  - ✅ Vessence案例：在律师事务所办公室工作数月来构建MVP
  - ✅ Algolia案例：从移动端SDK转型到云搜索服务
  - ✅ Medplum案例：开源EHR系统通过建立信任缩短销售周期
  - ✅ Optimizely案例：先构建最简单的书签工具版本
  - ✅ Airbnb案例：技术团队占比保持在30%左右

- **Article 1933 (Gemini 2.5 Pro)**：只有概括性内容
  - ❌ 缺少具体公司案例的详细描述
  - ❌ 缺少具体产品实例的说明
  - ❌ 只有抽象的概念和策略描述

### 根本原因

原始 prompt 中关于 "Segmented Outline" 的指令过于简单：

```markdown
## 步骤四：分段大纲

根据"# 视频内容分段处理"的要求，对文章进行分段，并呈现每段的核心内容。
完成后请检查是否覆盖了所有视频内容，且所有分段按时间顺序排列。

- 每段内容请使用以下格式输出。每个内容项之间保留一个空行。

[时间] 标题  
- 分段核心内容1  
- 分段核心内容2  
```

**问题**：
1. 没有明确要求包含具体案例
2. 没有强调需要列出公司名称、产品名称
3. 没有要求包含具体的数据和方法
4. "核心内容"这个表述过于抽象，导致不同模型理解不同

## 改进方案

### 核心修改点

本次改进包含两个主要部分：

#### 修改点1：在 "步骤四：分段大纲" 部分增强案例要求

#### 修改点2：在 "Key Takeaways" 部分新增案例展示要求

---

### 修改点1：Segmented Outline 部分

在 "步骤四：分段大纲" 部分，新增以下内容：

#### 1. 新增明确的要求说明

```markdown
### 重要要求：包含具体案例和详细信息

在 Segmented Outline 部分，除了列出每段的核心内容外，**必须包含原文中提到的所有具体案例、公司名称、产品名称和人物实例**。这些具体信息能够帮助读者更好地理解和记忆内容。
```

#### 2. 列出必须包含的内容类型

```markdown
#### 必须包含的内容类型：
1. **具体公司案例**：如果段落中提到某个公司的具体做法或经验，必须在该段落下列出。
   - 示例格式：`- Algolia案例：从移动端SDK转型到云搜索服务，最初销售困难但通过转型找到产品市场契合度`

2. **具体产品实例**：如果提到某个产品的特性或应用，必须列出。
   - 示例格式：`- Medplum案例：开源EHR系统通过建立信任缩短销售周期约一年`

3. **具体人物经历**：如果提到某个创始人或企业家的具体经历，必须列出。
   - 示例格式：`- Vessence创始人：在律师事务所办公室工作数月来构建MVP`

4. **具体数据和指标**：如果提到具体的数字、百分比或指标，必须列出。
   - 示例格式：`- 技术团队占比应保持在30%以上以确保持续的产品开发能力`

5. **具体策略和方法**：如果提到某个具体的操作方法或策略，必须列出。
   - 示例格式：`- Optimizely案例：先构建最简单的书签工具版本，再构建公开产品`
```

#### 3. 更新输出格式

```markdown
[时间] 标题  
- 分段核心内容1  
- 分段核心内容2  
- 公司/产品案例：具体案例描述（如有）
- 具体数据/方法：具体内容（如有）
```

#### 4. 提供完整示例

```markdown
#### 完整示例（展示如何包含具体案例）：

[0:00:36] 在传统行业中构建AI公司
- 创始人可以将AI引入传统行业的三种模式：销售软件、创建全栈式服务公司、收购现有公司
- 销售软件给现有从业者是最常见的模式，关键是找到一个有价值的切入点
- 创建全栈式公司需关注自动化率，避免过早规模化人力
- Airbnb案例：技术团队占比保持在30%左右以确保技术驱动文化
- Vessence案例：为律师构建软件，创始人没有法律背景，通过在律师事务所工作数月来构建MVP
```

---

### 修改点2：Key Takeaways 部分新增案例展示

在 "##### 每个话题的要点说明格式" 部分之后，新增以下内容：

#### 新增：案例展示要求

```markdown
###### 案例展示要求（新增）

**重要**：如果某个话题中的要点涉及具体的公司、产品或案例，**必须**在要点描述的末尾，用以下格式补充案例信息：

**格式**：`要点内容描述，案例：[公司/产品名称] - 简要说明案例的核心内容。`

**示例**：
- 创始人可以选择三种方式进入传统行业，最常见的是构建AI软件工具销售给行业从业者，这种方式允许创始人专注于最有价值的细分领域，案例：Vessence - 为律师构建软件，创始人没有法律背景，通过在律师事务所工作数月来构建MVP。

- 技术难度高的问题实际上是更好的创业机会，因为高门槛会阻止大多数竞争对手尝试，如果创始人有能力和勇气去解决，这将成为强大的护城河，案例：Algolia - 搜索引擎技术难度高，花了6个月才让产品达到良好状态，但最终成为强大的竞争优势。

**适用条件**：
- 只有当原文中明确提到了具体的公司、产品或实际案例时，才需要添加案例说明
- 如果要点是纯理论性的、概念性的描述，无需强制添加案例
- 案例说明应简洁，一句话概括核心要点即可
```

#### 更新示例

所有示例部分都已更新，展示如何在 Key Takeaways 中包含案例：

```markdown
**主题 1**  
- 要点内容，补充说明，进一步阐述核心观点，案例：[公司名称] - 该公司的具体做法和成果。

  *[01:55] 演讲者姓名："中文引用内容"*  
  💡**这句话的含义。**

- 要点内容，补充说明，这是一个纯理论性的要点。

  *[09:05] 演讲者姓名："中文引用内容"*  
  💡**这句话的含义。**
```

---

### 修改标识

所有修改部分都用以下注释标识：

**Segmented Outline 部分：**
```markdown
<!-- ===== 🔴 修改开始：增强 Segmented Outline 的具体案例要求 ===== -->
[修改内容]
<!-- ===== 🔴 修改结束 ===== -->
```

**Key Takeaways 部分：**
```markdown
<!-- ===== 🔴 修改开始：Key Takeaways 中添加案例展示要求 ===== -->
[修改内容]
<!-- ===== 🔴 修改结束 ===== -->
```

便于您 review 和定位修改位置。

## 预期效果

改进后的 prompt 应该能让所有模型（包括 Gemini 2.5 Pro）实现：

### 在 Segmented Outline 部分：

1. ✅ 识别并提取原文中的所有具体案例
2. ✅ 列出相关的公司名称和产品名称
3. ✅ 包含具体的数据、指标和方法
4. ✅ 提供更丰富、更易于理解的大纲内容
5. ✅ 保持与 Article 1934 相同的信息密度

### 在 Key Takeaways 部分：

1. ✅ 在每个要点末尾添加相关的案例说明
2. ✅ 使用统一的格式：`案例：[公司/产品名称] - 简要说明`
3. ✅ 帮助读者更好地理解抽象概念
4. ✅ 提供具体的实践参考
5. ✅ 增强内容的可读性和实用性

### 整体改进：

- 读者可以快速找到具体的公司/产品案例
- 理论与实践紧密结合
- 降低理解门槛，增强记忆点
- 保持内容的专业性和准确性

## 注意事项

### 避免过拟合

改进的 prompt 采用了通用的指导原则：

1. **通用性**：要求"包含具体案例、公司、产品"适用于所有类型的商业/技术内容
2. **灵活性**：使用"如有"标识，不强制要求每个段落都必须有案例
3. **示例驱动**：通过多个示例展示期望的输出格式，而非硬编码特定内容
4. **原则性指导**：强调"具体"和"详细"，而非列举特定的公司或产品名称

这样的设计确保改进后的 prompt 能够：
- ✅ 适用于各种类型的视频内容（不仅限于YC创业话题）
- ✅ 不会因为缺少特定类型的案例而导致输出异常
- ✅ 保持对其他场景的兼容性

## 文件位置

- **改进后的 prompt**：`backend/improved_prompt_summary_zh.md`
- **分析报告**：`backend/prompt_improvement_analysis.md`

## 下一步建议

1. Review 改进后的 prompt 文件，确认修改符合预期
2. 将改进后的 prompt 更新到数据库的 `keep_prompt` 表
3. 使用新 prompt 对同一视频进行测试，验证改进效果
4. 如果效果良好，考虑应用到英文版 prompt (`summary_en`)

