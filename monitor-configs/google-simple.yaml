# Google AI Studio 简化配置
name: "Google AI Studio"
url: "https://aistudio.google.com/usage?timeRange=last-7-days&tab=billing&project=gen-lang-client-0662613502"
description: "Google AI Studio 费用监控"

steps:
  # 1. 导航到页面
  - action: "navigate"
    url: "https://aistudio.google.com/usage?timeRange=last-7-days&tab=billing&project=gen-lang-client-0662613502"
    wait_for: "networkidle2"
    timeout: 30000
    comment: "访问 Google AI Studio Billing 页面"
  
  # 2. 等待页面基本加载
  - action: "wait"
    selector: "body"
    timeout: 10000
    comment: "等待页面基本加载完成"
  
  # 3. 调试截图 - 查看页面初始状态
  - action: "screenshot"
    full_page: true
    comment: "调试：截取页面初始状态"
  
  # 4. 等待费用组件加载（sdui-block 是主要容器）
  - action: "wait"
    selector: "sdui-block"
    timeout: 25000
    comment: "等待费用数据容器加载"
  
  # 4. 等待 sdui-text-fragment 元素
  - action: "wait"
    selector: "sdui-text-fragment"
    timeout: 20000
    comment: "等待文本元素加载"
  
  # 6. 提取总费用（Total Cost）
  - action: "extract"
    name: "total_cost"
    selector: "sdui-text-fragment[style*='font-size: 24px'][style*='font-weight: 600']"
    extract_type: "text"
    regex_pattern: "\\$([\\d.]+)"
    regex_group: 1
    transform: "float"
    comment: "提取总费用金额（从 '$16.8' 中提取 16.8）"
  
  # 7. 截图
  - action: "screenshot"
    full_page: false
    comment: "截取页面当前视图"

# Cookie 验证配置
validation:
  cookie_check:
    selector: "sdui-text-fragment[style*='font-size: 24px']"
    should_exist: true
    comment: "检查是否能看到费用金额元素，验证登录状态"

# 数据转换配置（可选，用于后处理）
data_transform:
  - field: "total_cost"
    type: "float"
    description: "总费用（美元）"

