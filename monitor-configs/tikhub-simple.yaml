name: "TikHub"
site_id: "tikhub"
url: "https://user.tikhub.io/dashboard/overview"
description: "监控 TikHub 账户余额和今日消费 (简化版)"
icon_url: "https://user.tikhub.io/favicon.ico"

steps:
  # 1. 导航到用户概览页
  - action: "navigate"
    url: "https://user.tikhub.io/dashboard/overview"
    wait_for: "domcontentloaded"
    timeout: 60000
    comment: "访问 TikHub 用户 Dashboard"

  # 2. 等待余额卡片出现（SPA 需要等待 JS 渲染）
  - action: "wait"
    selector: "div[data-tour='balance-card']"
    timeout: 30000
    comment: "等待余额卡片元素出现"

  # 3. 等待余额数据显示
  - action: "wait"
    selector: "div[data-tour='balance-card'] .text-2xl.font-bold"
    timeout: 15000
    comment: "等待账户余额数据加载"

  # 4. 提取 Account Balance (账户余额)
  # 目标结构: <div class="text-2xl font-bold">$9.0416</div>
  # 在 Balance 卡片中
  - action: "extract"
    name: "balance"
    selector: "div[data-tour='balance-card'] .text-2xl.font-bold"
    extract_type: "text"
    regex_pattern: "\\$([\\d.]+)"
    regex_group: 1
    transform: "float"
    comment: "提取账户余额（从 Balance 卡片中提取）"

  # 5. 截图
  - action: "screenshot"
    full_page: false
    comment: "截取页面"

# Cookie 验证配置
validation:
  cookie_check:
    selector: ".text-2xl.font-bold"
    should_exist: true

