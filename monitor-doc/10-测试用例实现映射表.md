# æµ‹è¯•ç”¨ä¾‹ä¸å®ç°æ˜ å°„è¡¨

> ç¡®ä¿æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½å…³è”åˆ°å…·ä½“çš„ä»£ç å®ç°ï¼Œè¦†ç›–æ— é—æ¼

## ğŸ“Š æ˜ å°„è¯´æ˜

**æ˜ å°„å…³ç³»**ï¼šæµ‹è¯•ç”¨ä¾‹ â†’ å®ç°ä»£ç  â†’ è®¾è®¡æ–‡æ¡£ â†’ éªŒè¯æ–¹æ³•

**è¦†ç›–ç‡ç›®æ ‡**ï¼š100%

## ğŸ—„ï¸ é˜¶æ®µä¸€ï¼šæ•°æ®åº“æµ‹è¯•

| ç”¨ä¾‹ç¼–å· | æµ‹è¯•ç”¨ä¾‹åç§° | å…³è”å®ç° | è®¾è®¡æ–‡æ¡£ | éªŒè¯æ–¹æ³• | çŠ¶æ€ |
|---------|-------------|---------|---------|---------|------|
| TC-DB-001 | åˆ›å»ºè¡¨ç»“æ„ | migration SQL | 02-æ•°æ®åº“è®¾è®¡.md (L110-L194) | MCP execute_sqlæŸ¥è¯¢è¡¨ | âœ…å·²å®Œæˆ |
| TC-DB-002 | å¯¼å…¥Cookieæ•°æ® | INSERT SQL | 02-æ•°æ®åº“è®¾è®¡.md (L197-L264) | SELECTéªŒè¯3æ¡è®°å½• | âœ…å·²å®Œæˆ |
| TC-DB-003 | åˆ›å»ºStorage Bucket | SQL/Dashboard | 01-æŠ€æœ¯æ¶æ„è®¾è®¡.md (L188-L227) | è®¿é—®DashboardæŸ¥çœ‹ | â¸ï¸å¾…å®Œæˆ |

### TC-DB-001è¯¦ç»†æ˜ å°„

**å®ç°æ–‡ä»¶**ï¼šå·²é€šè¿‡MCPæ‰§è¡Œ
```sql
-- æ–‡ä»¶ä½ç½®ï¼šå·²æ‰§è¡Œçš„migration
CREATE TABLE keep_monitor_sites (...);
CREATE TABLE keep_monitor_cookies (...);
CREATE TABLE keep_monitor_records (...);
```

**éªŒè¯SQL**ï¼š
```sql
SELECT table_name FROM information_schema.tables 
WHERE table_schema = 'public' AND table_name LIKE 'keep_monitor_%';
```

**é¢„æœŸç»“æœ**ï¼šè¿”å›3å¼ è¡¨

---

### TC-DB-002è¯¦ç»†æ˜ å°„

**å®ç°æ–‡ä»¶**ï¼šå·²é€šè¿‡MCPæ‰§è¡Œ
```sql
INSERT INTO keep_monitor_cookies (site_slug, cookies, ...) VALUES
  ('openrouter', '[...]', ...),
  ('tikhub', '[...]', ...),
  ('cursor', '[...]', ...);
```

**éªŒè¯SQL**ï¼š
```sql
SELECT site_slug, jsonb_array_length(cookies) as cookie_count, is_valid 
FROM keep_monitor_cookies;
```

**é¢„æœŸç»“æœ**ï¼š
- openrouter: 10ä¸ªCookie
- tikhub: 7ä¸ªCookie
- cursor: 5ä¸ªCookie

---

## ğŸ”§ é˜¶æ®µäºŒï¼šGitHub Actionsæµ‹è¯•

| ç”¨ä¾‹ç¼–å· | æµ‹è¯•ç”¨ä¾‹åç§° | å…³è”å®ç° | è®¾è®¡æ–‡æ¡£ | éªŒè¯æ–¹æ³• | çŠ¶æ€ |
|---------|-------------|---------|---------|---------|------|
| TC-GHA-001 | workflowé…ç½®æ­£ç¡®æ€§ | .github/workflows/*.yml | 09-æœ€ç»ˆæŠ€æœ¯æ–¹æ¡ˆ.md (L44-L96) | GitHub Actionsé¡µé¢æ£€æŸ¥ | â¸ï¸å¾…å®Œæˆ |
| TC-GHA-002 | æ‰‹åŠ¨è§¦å‘workflow | workflow_dispatché…ç½® | 09-æœ€ç»ˆæŠ€æœ¯æ–¹æ¡ˆ.md (L47) | æ‰‹åŠ¨ç‚¹å‡»Run workflowæŒ‰é’® | â¸ï¸å¾…å®Œæˆ |
| TC-GHA-003 | å®šæ—¶ä»»åŠ¡è§¦å‘ | croné…ç½® | 09-æœ€ç»ˆæŠ€æœ¯æ–¹æ¡ˆ.md (L142) | ç­‰å¾…UTC 1:00è‡ªåŠ¨æ‰§è¡Œ | â¸ï¸å¾…å®Œæˆ |
| TC-GHA-004 | å¹¶è¡Œæ‰§è¡Œ3ä¸ªç½‘ç«™ | matrix strategy | 09-æœ€ç»ˆæŠ€æœ¯æ–¹æ¡ˆ.md (L146-L168) | æ£€æŸ¥3ä¸ªjobåŒæ—¶è¿è¡Œ | â¸ï¸å¾…å®Œæˆ |
| TC-GHA-005 | Secretsé…ç½®æ­£ç¡® | GitHub Secrets | 09-æœ€ç»ˆæŠ€æœ¯æ–¹æ¡ˆ.md (L527-L533) | workflowèƒ½è¯»å–secrets | â¸ï¸å¾…å®Œæˆ |

### TC-GHA-001è¯¦ç»†æ˜ å°„

**å®ç°æ–‡ä»¶**ï¼š
```
.github/workflows/scrape-openrouter.yml
.github/workflows/scrape-tikhub.yml
.github/workflows/scrape-cursor.yml
.github/workflows/scrape-all.yml
```

**å…³é”®é…ç½®**ï¼š
```yaml
on:
  workflow_dispatch:  # æ‰‹åŠ¨è§¦å‘
  schedule:
    - cron: '0 1 * * *'  # å®šæ—¶è§¦å‘
```

**éªŒè¯æ–¹æ³•**ï¼š
1. è®¿é—® `https://github.com/YOUR_REPO/actions`
2. åº”çœ‹åˆ°4ä¸ªworkflow
3. ç‚¹å‡»workflowæŸ¥çœ‹é…ç½®

**é¢„æœŸç»“æœ**ï¼š
- 4ä¸ªworkflowæ­£å¸¸æ˜¾ç¤º
- cronè¡¨è¾¾å¼æ­£ç¡®
- workflow_dispatchå·²å¯ç”¨

---

### TC-GHA-004è¯¦ç»†æ˜ å°„

**å®ç°æ–‡ä»¶**ï¼š`.github/workflows/scrape-all.yml`

**å…³é”®ä»£ç **ï¼š
```yaml
strategy:
  matrix:
    site: [openrouter, tikhub, cursor]
  fail-fast: false
```

**éªŒè¯æ–¹æ³•**ï¼š
1. æ‰‹åŠ¨è§¦å‘scrape-all workflow
2. è§‚å¯ŸActionsé¡µé¢
3. åº”çœ‹åˆ°3ä¸ªjobå¹¶è¡Œè¿è¡Œ

**é¢„æœŸç»“æœ**ï¼š
- 3ä¸ªjobåŒæ—¶å¯åŠ¨
- æ¯ä¸ªjobç‹¬ç«‹è¿è¡Œ
- å¤±è´¥ä¸å½±å“å…¶ä»–job

---

## ğŸ¤– é˜¶æ®µä¸‰ï¼šæŠ“å–å¼•æ“æµ‹è¯•

| ç”¨ä¾‹ç¼–å· | æµ‹è¯•ç”¨ä¾‹åç§° | å…³è”å®ç° | è®¾è®¡æ–‡æ¡£ | éªŒè¯æ–¹æ³• | çŠ¶æ€ |
|---------|-------------|---------|---------|---------|------|
| TC-ENG-001 | ScraperEngineåˆå§‹åŒ– | scripts/scraper/engine.js (L1-L15) | 09-æœ€ç»ˆæŠ€æœ¯æ–¹æ¡ˆ.md (L181-L201) | å®ä¾‹åŒ–æˆåŠŸ | â¸ï¸å¾…å®Œæˆ |
| TC-ENG-002 | navigateæ­¥éª¤æ‰§è¡Œ | engine.js executeStep (L91-L96) | monitor-configs/*.yaml | é¡µé¢æˆåŠŸåŠ è½½ | â¸ï¸å¾…å®Œæˆ |
| TC-ENG-003 | extractæ­¥éª¤æ‰§è¡Œ | engine.js extractData (L137-L177) | monitor-configs/*.yaml | æ•°æ®æ­£ç¡®æå– | â¸ï¸å¾…å®Œæˆ |
| TC-ENG-004 | screenshotæ­¥éª¤æ‰§è¡Œ | engine.js executeStep (L109-L124) | 09-æœ€ç»ˆæŠ€æœ¯æ–¹æ¡ˆ.md (L281-L300) | æˆªå›¾ä¸Šä¼ æˆåŠŸ | â¸ï¸å¾…å®Œæˆ |
| TC-ENG-005 | CookieéªŒè¯ | engine.js validateCookie (L179-L196) | monitor-configs/*.yaml | æ­£ç¡®æ£€æµ‹CookieçŠ¶æ€ | â¸ï¸å¾…å®Œæˆ |
| TC-ENG-006 | æ•°æ®ä¿å­˜åˆ°Supabase | engine.js saveToDatabase (L198-L235) | 02-æ•°æ®åº“è®¾è®¡.md (L167-L195) | æ•°æ®åº“æœ‰æ–°è®°å½• | â¸ï¸å¾…å®Œæˆ |

### TC-ENG-002è¯¦ç»†æ˜ å°„

**å®ç°æ–‡ä»¶**ï¼š`scripts/scraper/engine.js`

**å…³é”®ä»£ç **ï¼š
```javascript
case 'navigate':
  await page.goto(step.url, {
    waitUntil: step.wait_for || 'networkidle2',
    timeout: step.timeout || 30000
  });
  break;
```

**é…ç½®æ–‡ä»¶**ï¼š`monitor-configs/openrouter.yaml (L34-L40)`

**éªŒè¯æ–¹æ³•**ï¼š
1. è¿è¡Œè„šæœ¬ï¼š`node scripts/scrape-openrouter.js`
2. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼šåº”çœ‹åˆ° "Navigating to https://..."
3. æ— timeouté”™è¯¯

**é¢„æœŸç»“æœ**ï¼š
- é¡µé¢æˆåŠŸåŠ è½½
- ç­‰å¾…networkidle2çŠ¶æ€
- è€—æ—¶ < 30ç§’

---

### TC-ENG-003è¯¦ç»†æ˜ å°„

**å®ç°æ–‡ä»¶**ï¼š`scripts/scraper/engine.js`

**å…³é”®ä»£ç **ï¼š
```javascript
async extractData(page, step) {
  const { selector, extract_type, regex_pattern, regex_group, transform } = step;
  
  if (extract_type === 'regex' || regex_pattern) {
    const bodyText = await page.evaluate(() => document.body.innerText);
    const pattern = new RegExp(regex_pattern || selector...);
    const match = bodyText.match(pattern);
    rawValue = match && match[regex_group || 1] ? match[regex_group || 1] : null;
  }
  
  // æ•°æ®è½¬æ¢
  if (transform === 'float') return parseFloat(rawValue);
  // ...
}
```

**é…ç½®æ–‡ä»¶**ï¼š`monitor-configs/openrouter.yaml (L54-L62)`

**YAMLé…ç½®**ï¼š
```yaml
- action: extract
  name: credits
  selector: "text=/\\$\\s*([\\d.]+)/"
  extract_type: regex
  regex_group: 1
  transform: float
```

**éªŒè¯æ–¹æ³•**ï¼š
1. è¿è¡Œè„šæœ¬
2. æŸ¥çœ‹æ—¥å¿—ï¼šåº”çœ‹åˆ° "Extracted credits: 7.73"
3. éªŒè¯æ•°æ®ç±»å‹æ˜¯number

**é¢„æœŸç»“æœ**ï¼š
- æ­£ç¡®æå–æ•°å€¼
- ç±»å‹è½¬æ¢æ­£ç¡®ï¼ˆstringâ†’floatï¼‰
- å€¼åˆç†ï¼ˆ0-1000èŒƒå›´ï¼‰

---

## ğŸ“± é˜¶æ®µå››ï¼šå‰ç«¯ç»„ä»¶æµ‹è¯•

| ç”¨ä¾‹ç¼–å· | æµ‹è¯•ç”¨ä¾‹åç§° | å…³è”å®ç° | è®¾è®¡æ–‡æ¡£ | éªŒè¯æ–¹æ³• | çŠ¶æ€ |
|---------|-------------|---------|---------|---------|------|
| TC-FE-001 | MonitorViewé¡µé¢æ¸²æŸ“ | src/views/MonitorView.vue | 06-æ ¸å¿ƒä»£ç å®ç°.md (L616-L704) | è®¿é—®/monitor | â¸ï¸å¾…å®Œæˆ |
| TC-FE-002 | MonitorCardç»„ä»¶æ¸²æŸ“ | src/components/MonitorCard.vue | 06-æ ¸å¿ƒä»£ç å®ç°.md (L706-L930) | å¡ç‰‡æ­£å¸¸æ˜¾ç¤º | â¸ï¸å¾…å®Œæˆ |
| TC-FE-003 | æ•°æ®åŠ è½½å’Œå±•ç¤º | MonitorView loadRecords() | 06-æ ¸å¿ƒä»£ç å®ç°.md (L664-L673) | æ•°æ®æ­£ç¡®æ˜¾ç¤º | â¸ï¸å¾…å®Œæˆ |
| TC-FE-004 | CookieçŠ¶æ€æŒ‡ç¤ºå™¨ | MonitorCard cookie-status | 06-æ ¸å¿ƒä»£ç å®ç°.md (L798-L815) | ç»¿ç‚¹/çº¢ç‚¹æ­£ç¡®æ˜¾ç¤º | â¸ï¸å¾…å®Œæˆ |
| TC-FE-005 | æ‰‹åŠ¨è§¦å‘åˆ·æ–° | MonitorCard handleRefresh() | 06-æ ¸å¿ƒä»£ç å®ç°.md (L876-L886) | ç‚¹å‡»æŒ‰é’®è§¦å‘æŠ“å– | â¸ï¸å¾…å®Œæˆ |
| TC-FE-006 | æˆªå›¾é¢„è§ˆåŠŸèƒ½ | MonitorCard showScreenshot() | 06-æ ¸å¿ƒä»£ç å®ç°.md (L888-L892) | ç‚¹å‡»ç¼©ç•¥å›¾æ˜¾ç¤ºå¤§å›¾ | â¸ï¸å¾…å®Œæˆ |
| TC-FE-007 | æ•°æ®æ ¼å¼åŒ–æ˜¾ç¤º | MonitorCard formatValue() | 06-æ ¸å¿ƒä»£ç å®ç°.md (L826-L845) | é‡‘é¢ã€ç™¾åˆ†æ¯”æ­£ç¡®æ ¼å¼åŒ– | â¸ï¸å¾…å®Œæˆ |

### TC-FE-001è¯¦ç»†æ˜ å°„

**å®ç°æ–‡ä»¶**ï¼š`src/views/MonitorView.vue`

**å…³é”®ä»£ç **ï¼š
```vue
<template>
  <div class="monitor-view">
    <div class="monitor-grid">
      <MonitorCard
        v-for="site in sites"
        :key="site.slug"
        :site="site"
        :latest-record="getLatestRecord(site.slug)"
        :cookie-status="getCookieStatus(site.slug)"
        @refresh="refreshSite(site.slug)"
      />
    </div>
  </div>
</template>
```

**éªŒè¯æ–¹æ³•**ï¼š
1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š`npm run dev`
2. è®¿é—®ï¼š`http://localhost:3000/monitor`
3. æ£€æŸ¥é¡µé¢å…ƒç´ 

**é¢„æœŸç»“æœ**ï¼š
- é¡µé¢æ­£å¸¸åŠ è½½
- æ˜¾ç¤º3ä¸ªç½‘ç«™å¡ç‰‡
- æ— æ§åˆ¶å°é”™è¯¯

---

### TC-FE-004è¯¦ç»†æ˜ å°„

**å®ç°æ–‡ä»¶**ï¼š`src/components/MonitorCard.vue`

**å…³é”®ä»£ç **ï¼š
```vue
<div 
  class="cookie-status" 
  :class="{ valid: cookieStatus?.is_valid, invalid: !cookieStatus?.is_valid }"
  :title="cookieTooltip"
></div>
```

**æ ·å¼æ–‡ä»¶**ï¼š`08-ä¼˜åŒ–çš„è§†è§‰è®¾è®¡æ–¹æ¡ˆ.md (L287-L324)`

**CSSå®ç°**ï¼š
```css
.cookie-status.valid {
  background: linear-gradient(135deg, #10b981, #059669);
  box-shadow: 0 0 12px rgba(16, 185, 129, 0.5);
  animation: statusPulse 2s infinite;
}

.cookie-status.invalid {
  background: linear-gradient(135deg, #ef4444, #dc2626);
  box-shadow: 0 0 12px rgba(239, 68, 68, 0.5);
}
```

**éªŒè¯æ–¹æ³•**ï¼š
1. æŸ¥çœ‹é¡µé¢ä¸Šçš„çŠ¶æ€æŒ‡ç¤ºå™¨
2. æœ‰æ•ˆCookieï¼šåº”æ˜¾ç¤ºç»¿è‰²å‘å…‰ç‚¹
3. æ— æ•ˆCookieï¼šåº”æ˜¾ç¤ºçº¢è‰²å‘å…‰ç‚¹
4. é¼ æ ‡æ‚¬åœï¼šæ˜¾ç¤ºtooltip

**é¢„æœŸç»“æœ**ï¼š
- Cookieæœ‰æ•ˆï¼šğŸŸ¢ ç»¿è‰²è„‰å†²åŠ¨ç”»
- Cookieæ— æ•ˆï¼šğŸ”´ çº¢è‰²è„‰å†²åŠ¨ç”»
- Tooltipæ˜¾ç¤ºæœ€åéªŒè¯æ—¶é—´

---

### TC-FE-005è¯¦ç»†æ˜ å°„

**å®ç°æ–‡ä»¶**ï¼š`src/components/MonitorCard.vue`

**å…³é”®ä»£ç **ï¼š
```javascript
async function handleRefresh() {
  isRefreshing.value = true;
  try {
    emit('refresh');
    await new Promise(resolve => setTimeout(resolve, 1000));
  } finally {
    isRefreshing.value = false;
  }
}
```

**APIè°ƒç”¨**ï¼š`api/trigger-scrape.ts (L1-L44)`

**éªŒè¯æ–¹æ³•**ï¼š
1. ç‚¹å‡»å¡ç‰‡å³ä¸‹è§’çš„ğŸ”„æŒ‰é’®
2. è§‚å¯ŸæŒ‰é’®çŠ¶æ€å˜åŒ–
3. æ£€æŸ¥GitHub Actionsæ˜¯å¦è§¦å‘
4. ç­‰å¾…æ•°æ®æ›´æ–°

**é¢„æœŸç»“æœ**ï¼š
- æŒ‰é’®å˜ä¸ºLoadingçŠ¶æ€ï¼ˆâ³å›¾æ ‡+æ—‹è½¬åŠ¨ç”»ï¼‰
- ç¦ç”¨çŠ¶æ€é˜²æ­¢é‡å¤ç‚¹å‡»
- GitHub ActionsæˆåŠŸè§¦å‘
- 1-2åˆ†é’Ÿåæ•°æ®æ›´æ–°

---

## ğŸ”„ é˜¶æ®µäº”ï¼šé›†æˆæµ‹è¯•

| ç”¨ä¾‹ç¼–å· | æµ‹è¯•ç”¨ä¾‹åç§° | å…³è”å®ç° | è®¾è®¡æ–‡æ¡£ | éªŒè¯æ–¹æ³• | çŠ¶æ€ |
|---------|-------------|---------|---------|---------|------|
| TC-INT-001 | OpenRouterç«¯åˆ°ç«¯ | å®Œæ•´æµç¨‹ | 05-æµ‹è¯•ç”¨ä¾‹.md (L174-L226) | æ‰‹åŠ¨è§¦å‘â†’æ•°æ®æ›´æ–° | â¸ï¸å¾…å®Œæˆ |
| TC-INT-002 | TikHubç«¯åˆ°ç«¯ | å®Œæ•´æµç¨‹ | 05-æµ‹è¯•ç”¨ä¾‹.md (L228-L281) | æ‰‹åŠ¨è§¦å‘â†’æ•°æ®æ›´æ–° | â¸ï¸å¾…å®Œæˆ |
| TC-INT-003 | Cursorç«¯åˆ°ç«¯ | å®Œæ•´æµç¨‹ | 05-æµ‹è¯•ç”¨ä¾‹.md (L283-L329) | æ‰‹åŠ¨è§¦å‘â†’æ•°æ®æ›´æ–° | â¸ï¸å¾…å®Œæˆ |
| TC-INT-004 | å®šæ—¶ä»»åŠ¡å®Œæ•´æµç¨‹ | å®Œæ•´æµç¨‹ | 05-æµ‹è¯•ç”¨ä¾‹.md (L454-L492) | ç­‰å¾…9ç‚¹è‡ªåŠ¨æ‰§è¡Œ | â¸ï¸å¾…å®Œæˆ |
| TC-INT-005 | Cookieå¤±æ•ˆå¤„ç† | å®Œæ•´æµç¨‹ | 05-æµ‹è¯•ç”¨ä¾‹.md (L331-L361) | æ¨¡æ‹Ÿå¤±æ•ˆCookie | â¸ï¸å¾…å®Œæˆ |
| TC-INT-006 | ç½‘ç»œå¼‚å¸¸å¤„ç† | é‡è¯•æœºåˆ¶ | 05-æµ‹è¯•ç”¨ä¾‹.md (L496-L529) | æ–­ç½‘æµ‹è¯• | â¸ï¸å¾…å®Œæˆ |

### TC-INT-001è¯¦ç»†æ˜ å°„

**æ¶‰åŠç»„ä»¶**ï¼š
1. å‰ç«¯ï¼šMonitorCard.vue â†’ handleRefresh()
2. APIï¼šapi/trigger-scrape.ts
3. GitHubï¼š.github/workflows/scrape-openrouter.yml
4. è„šæœ¬ï¼šscripts/scrape-openrouter.js
5. å¼•æ“ï¼šscripts/scraper/engine.js
6. æ•°æ®åº“ï¼škeep_monitor_recordsè¡¨

**å®Œæ•´æµç¨‹**ï¼š
```
ç”¨æˆ·ç‚¹å‡»åˆ·æ–°æŒ‰é’®
  â†“
å‰ç«¯è°ƒç”¨ /api/trigger-scrape
  â†“
APIè°ƒç”¨ GitHub APIè§¦å‘workflow
  â†“
GitHub Actionså¯åŠ¨ubuntu-latest runner
  â†“
å®‰è£…Node.jså’ŒPuppeteer
  â†“
è¿è¡Œ node scripts/scrape-openrouter.js
  â†“
ScraperEngineæ‰§è¡ŒæŠ“å–æ­¥éª¤
  â†“
ä¿å­˜æ•°æ®åˆ°Supabase
  â†“
ä¸Šä¼ æˆªå›¾åˆ°Storage
  â†“
å‰ç«¯è‡ªåŠ¨åˆ·æ–°æ•°æ®ï¼ˆæˆ–æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼‰
  â†“
ç”¨æˆ·çœ‹åˆ°æœ€æ–°æ•°æ®
```

**éªŒè¯æ–¹æ³•**ï¼š
1. æ‰“å¼€/monitoré¡µé¢
2. ç‚¹å‡»OpenRouterå¡ç‰‡çš„ğŸ”„æŒ‰é’®
3. æ‰“å¼€GitHub Actionsé¡µé¢è§‚å¯Ÿ
4. ç­‰å¾…workflowå®Œæˆï¼ˆçº¦1-2åˆ†é’Ÿï¼‰
5. åˆ·æ–°é¡µé¢æŸ¥çœ‹æ–°æ•°æ®

**é¢„æœŸç»“æœ**ï¼š
- âœ… æŒ‰é’®æ­£å¸¸è§¦å‘
- âœ… GitHub Actions workflowè¿è¡Œ
- âœ… workflowçŠ¶æ€ï¼šæˆåŠŸ
- âœ… æ•°æ®åº“æœ‰æ–°è®°å½•
- âœ… Screenshotä¸Šä¼ æˆåŠŸ
- âœ… å‰ç«¯æ˜¾ç¤ºæœ€æ–°æ•°æ®
- âœ… CookieçŠ¶æ€æ›´æ–°

---

### TC-INT-004è¯¦ç»†æ˜ å°„

**æ¶‰åŠç»„ä»¶**ï¼š
1. GitHub Actionsï¼šcroné…ç½®
2. Workflowï¼šscrape-all.yml
3. æ‰€æœ‰æŠ“å–è„šæœ¬

**å…³é”®é…ç½®**ï¼š
```yaml
on:
  schedule:
    - cron: '0 1 * * *'  # UTC 1:00 = åŒ—äº¬æ—¶é—´ 9:00
```

**éªŒè¯æ–¹æ³•**ï¼š
1. ç­‰å¾…åˆ°åŒ—äº¬æ—¶é—´9:00-9:05
2. è®¿é—®GitHub Actionsé¡µé¢
3. æŸ¥çœ‹scrape-all workflowæ˜¯å¦è‡ªåŠ¨è¿è¡Œ
4. æ£€æŸ¥æ•°æ®åº“è®°å½•

**SQLéªŒè¯**ï¼š
```sql
SELECT 
  site_slug, 
  status, 
  trigger_source, 
  created_at
FROM keep_monitor_records
WHERE created_at BETWEEN 
  '2025-11-11 01:00:00' AND '2025-11-11 01:10:00'
ORDER BY created_at;
```

**é¢„æœŸç»“æœ**ï¼š
- âœ… å‡†æ—¶è§¦å‘ï¼ˆè¯¯å·®Â±5åˆ†é’Ÿå†…ï¼‰
- âœ… 3ä¸ªç½‘ç«™å¹¶è¡Œæ‰§è¡Œ
- âœ… å…¨éƒ¨æˆåŠŸå®Œæˆ
- âœ… trigger_source='auto'
- âœ… æ•°æ®åº“æœ‰3æ¡æ–°è®°å½•

---

## ğŸ“Š è¦†ç›–ç‡ç»Ÿè®¡

### æŒ‰é˜¶æ®µç»Ÿè®¡

| é˜¶æ®µ | æ€»ç”¨ä¾‹æ•° | å·²å®ç° | å¾…å®ç° | è¦†ç›–ç‡ |
|------|---------|--------|--------|--------|
| æ•°æ®åº“ | 3 | 2 | 1 | 66.7% |
| GitHub Actions | 5 | 0 | 5 | 0% |
| æŠ“å–å¼•æ“ | 6 | 0 | 6 | 0% |
| å‰ç«¯ç»„ä»¶ | 7 | 0 | 7 | 0% |
| é›†æˆæµ‹è¯• | 6 | 0 | 6 | 0% |
| **æ€»è®¡** | **27** | **2** | **25** | **7.4%** |

### æŒ‰ä¼˜å…ˆçº§ç»Ÿè®¡

| ä¼˜å…ˆçº§ | ç”¨ä¾‹æ•° | è¯´æ˜ |
|--------|--------|------|
| P0ï¼ˆå¿…é¡»ï¼‰ | 12 | æ ¸å¿ƒåŠŸèƒ½ï¼Œå½±å“åŸºæœ¬ä½¿ç”¨ |
| P1ï¼ˆé‡è¦ï¼‰ | 10 | é‡è¦åŠŸèƒ½ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ |
| P2ï¼ˆå¯é€‰ï¼‰ | 5 | ä¼˜åŒ–åŠŸèƒ½ï¼Œé”¦ä¸Šæ·»èŠ± |

### P0ä¼˜å…ˆçº§ç”¨ä¾‹æ¸…å•

1. TC-DB-003 - åˆ›å»ºStorage Bucket
2. TC-GHA-001 - workflowé…ç½®æ­£ç¡®æ€§
3. TC-GHA-002 - æ‰‹åŠ¨è§¦å‘workflow
4. TC-ENG-002 - navigateæ­¥éª¤æ‰§è¡Œ
5. TC-ENG-003 - extractæ­¥éª¤æ‰§è¡Œ
6. TC-ENG-006 - æ•°æ®ä¿å­˜åˆ°Supabase
7. TC-FE-001 - MonitorViewé¡µé¢æ¸²æŸ“
8. TC-FE-002 - MonitorCardç»„ä»¶æ¸²æŸ“
9. TC-FE-003 - æ•°æ®åŠ è½½å’Œå±•ç¤º
10. TC-INT-001 - OpenRouterç«¯åˆ°ç«¯
11. TC-INT-002 - TikHubç«¯åˆ°ç«¯
12. TC-INT-003 - Cursorç«¯åˆ°ç«¯

## âœ… ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å®Œæˆï¼ˆP0ï¼‰

1. **åˆ›å»ºStorage Bucket** â†’ TC-DB-003
2. **åˆ›å»ºGitHub workflows** â†’ TC-GHA-001
3. **åˆ›å»ºæŠ“å–è„šæœ¬** â†’ TC-ENG-*
4. **æµ‹è¯•å•ä¸ªç½‘ç«™** â†’ TC-INT-001

### æœ¬å‘¨å®Œæˆï¼ˆP0+P1ï¼‰

5. **åˆ›å»ºå‰ç«¯ç»„ä»¶** â†’ TC-FE-*
6. **å®Œæ•´é›†æˆæµ‹è¯•** â†’ TC-INT-*
7. **å®šæ—¶ä»»åŠ¡æµ‹è¯•** â†’ TC-GHA-003

### æŒç»­ä¼˜åŒ–ï¼ˆP2ï¼‰

8. **é”™è¯¯å¤„ç†** â†’ TC-INT-006
9. **æ€§èƒ½ä¼˜åŒ–**
10. **ç”¨æˆ·ä½“éªŒæ”¹è¿›**

---

**è¯´æ˜**ï¼š
- âœ… è¡¨ç¤ºå·²å®Œæˆå¹¶éªŒè¯
- â¸ï¸ è¡¨ç¤ºå¾…å®ç°
- ğŸ”„ è¡¨ç¤ºæ­£åœ¨è¿›è¡Œ
- âŒ è¡¨ç¤ºæµ‹è¯•å¤±è´¥éœ€ä¿®å¤

